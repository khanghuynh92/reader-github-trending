var _keys=require('babel-runtime/core-js/object/keys');var _keys2=_interopRequireDefault(_keys);var _moment=require('moment');var _moment2=_interopRequireDefault(_moment);var _url=require('url');var _readerScraper=require('reader-scraper');var readerScraper=_interopRequireWildcard(_readerScraper);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj['default']=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj}}// generate url
var d=new Date;// import Path from 'path';
var twoDateAgo=(0,_moment2['default'])(new Date(d.setDate(d.getDate()-2))).format('YYYY-MM-DD');var params={access_token:'a538daf7104fd88118501cee739e412878dd9be2',q:'created:>'+String(twoDateAgo),sort:'stars',order:'desc'};var query=(0,_keys2['default'])(params).map(function(k){return String(encodeURIComponent(k))+'='+String(encodeURIComponent(params[k]))}).join('&');var url='https://api.github.com/search/repositories?'+String(query);// map function
var map=function map(result){if(result.total_count>0){var items=result.total_count>process.env.FETCH_LIMIT?result.items.slice(0,process.env.FETCH_LIMIT):result.items;return items.map(function(item){var postUrl=new _url.URL(item.url);return{url:postUrl.href,title:item.description||item.full_name,content:'',image:item.owner.avatar_url,host:postUrl.hostname,path:postUrl.pathname}})}return[]};// config
var config={url:url,map:map,options:{method:'GET',headers:{'User-Agent':'Request-Promise'}}};// start scraper
readerScraper.init(config);readerScraper.start();