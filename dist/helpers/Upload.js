Object.defineProperty(exports,'__esModule',{value:true});var _regenerator=require('babel-runtime/regenerator');var _regenerator2=_interopRequireDefault(_regenerator);var _stringify=require('babel-runtime/core-js/json/stringify');var _stringify2=_interopRequireDefault(_stringify);var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _nodeFetch=require('node-fetch');var _nodeFetch2=_interopRequireDefault(_nodeFetch);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj}}var upload=function(){var _this=this;function _callee(posts){var scraper;return _regenerator2['default'].async(function(){function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:scraper=JSON.parse(_fs2['default'].readFileSync('./scraper.json','utf8'));if(!scraper.id){_context.next=11;break}_context.prev=2;_context.next=5;return _regenerator2['default'].awrap((0,_nodeFetch2['default'])(String(process.env.SCRAPER_ADMIN_URL)+'/upload',{headers:{'Content-Type':'application/json','scraper-id':scraper.id},method:'POST',body:(0,_stringify2['default'])(posts)}));case 5:console.log('Upload successfully!');_context.next=11;break;case 8:_context.prev=8;_context.t0=_context['catch'](2);console.log(_context.t0);case 11:case'end':return _context.stop();}}}return _callee$}(),null,_this,[[2,8]])}return _callee}();exports['default']=upload;